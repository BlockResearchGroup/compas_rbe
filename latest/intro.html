<!DOCTYPE html>
<html lang="en">
<head>
  
  <title>compas_rbe - Rigid Block Equilibrium Analysis</title>
  

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta name="author" content="Tom Van Mele" />
  <meta name="description" content="Form Finding of cablenet structures for the COMPAS framework." />

  <link rel="shortcut icon" href="_static/images/compas.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.9/styles/default.min.css">
  <link rel="stylesheet" type="text/css" href="_static/css/compas.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/compas-reference.css" />

  
    <link rel="next" title="Getting Started" href="gettingstarted.html" />
  

  
    <link rel="prev" title="compas_rbe" href="index.html" />
  

  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body data-spy="scroll" data-target="#compas-toc">
  <!-- header -->
  <header id="header" class="compas-header d-flex align-items-center">
    <nav class="navbar navbar-expand navbar-dark col flex-column flex-md-row text-center">
      <!-- brand -->
      <a class="navbar-brand" href="https://blockresearchgroup.github.io/compas_rbe/">
        <img src="_static/images/compas_icon_white.png" alt="COMPAS RBE" width="48px" height="48px" />
      </a>
      <!-- brand -->
      <!-- primary -->
      <ul class="navbar-nav">
        <li class="nav-item active"><a class="nav-link" href="https://blockresearchgroup.github.io/compas_rbe/">COMPAS RBE</a></li>
      </ul>
      <!-- primary -->
      <ul class="navbar-nav d-none d-md-flex ml-md-auto">
        <!-- version -->
        
        <meta id="doc_versions" data-url="https://blockresearchgroup.github.io/compas_rbe/doc_versions.txt" data-docs="https://blockresearchgroup.github.io/compas_rbe/">
        <li class="nav-item nav-versions dropdown">
          <a class="nav-item nav-link dropdown-toggle mr-md-2" href="#" id="bd-versions" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            0.1.1
          </a>
          <div id="doc_version_list" class="dropdown-menu dropdown-menu-md-right" aria-labelledby="bd-versions"></div>
        </li>
        
        <!-- version -->
        <!-- social -->
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/BlockResearchGroup/compas_rbe" target="_blank">
            <span class="fab fa-github fa-1x"></span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="http://forum.compas-framework.org" target="_blank">
            <span class="fab fa-discourse fa-1x"></span>
          </a>
        </li>
        <!-- social -->
      </ul>
    </nav>
  </header>
  <!-- header -->
  <!-- main -->
  <div class="container-fluid">
    <div class="row">
      <!-- main -->
      <main class="col-12 col-md-9 col-xl-7 px-2 px-md-5 pt-2 pb-5 compas-content" role="main">
        
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-3 bg-white px-0">
            <li class="breadcrumb-item"><a href="index.html">docs</a></li>
            
            <li class="breadcrumb-item active" aria-current="page">Rigid Block Equilibrium Analysis</li>
          </ol>
        </nav>
        

        
        
        <div class="section" id="rigid-block-equilibrium-analysis">
<h1>Rigid Block Equilibrium Analysis<a class="headerlink" href="#rigid-block-equilibrium-analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="api/compas_rbe.html#module-compas_rbe" title="compas_rbe"><code class="xref py py-mod docutils literal notranslate"><span class="pre">compas_rbe</span></code></a> provides functionality for computing the set of contact forces
at the interfaces between the rigid blocks of a <em>discrete element assembly</em>
that establish equilibrium with the smallest amount of tension forces possible,
i.e. it favours solutions with only compression forces and friction.</p>
</div>
<div class="section" id="assembly-data-structure">
<h2>Assembly data structure<a class="headerlink" href="#assembly-data-structure" title="Permalink to this headline">¶</a></h2>
<p>Assemblies of rigid blocks are represented with an <code class="docutils literal notranslate"><span class="pre">Assembly</span></code> data structure.
An <code class="docutils literal notranslate"><span class="pre">Assembly</span></code> data structure is a network of vertices connected by edges.
Each vertex corresponds to one rigid block in the assembly.
Each edge corresponds to an interface between two blocks.
The blocks are represented by <code class="docutils literal notranslate"><span class="pre">Block</span></code> data structures. A <code class="docutils literal notranslate"><span class="pre">Block</span></code> is
a closed <code class="docutils literal notranslate"><span class="pre">Mesh</span></code> with some additional functionality.</p>
<p>For more information about <code class="docutils literal notranslate"><span class="pre">Assembly</span></code> and <code class="docutils literal notranslate"><span class="pre">Block</span></code>, see <code class="xref py py-mod docutils literal notranslate"><span class="pre">compas_assembly.datastructures</span></code>.</p>
</div>
<div class="section" id="quadratic-program">
<h2>Quadratic Program<a class="headerlink" href="#quadratic-program" title="Permalink to this headline">¶</a></h2>
<div class="figure align-default">
<img alt="_images/compas_rbe_unknowns.png" class="figure-img img-fluid" src="_images/compas_rbe_unknowns.png" />
</div>
<p><a class="reference internal" href="api/compas_rbe.html#module-compas_rbe" title="compas_rbe"><code class="xref py py-mod docutils literal notranslate"><span class="pre">compas_rbe</span></code></a> finds a feasible equilibrium state by solving the following
quadratic optimisation problem with linear equality and inequality constraints</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
    &amp; \underset{x}{\text{minimise}} &amp; \quad 0.5 \, \mathbf{x}^{T} \mathbf{P} \mathbf{x} + \mathbf{q}^{T} \mathbf{x} \\
    &amp; \text{such that} &amp; \quad \mathbf{A} \mathbf{x}  = \mathbf{b} \\
    &amp;                  &amp; \quad \mathbf{G} \mathbf{x} \leq \mathbf{h} \\
\end{aligned}\end{split}\]</div>
<p><span class="math notranslate nohighlight">\(\mathbf{x}\)</span> is the <em>4n-by-1</em> vector of the 4 unknown contact force component
magnitudes per vertex of all <em>n</em> interface vertices of the assembly, along the directions
of the frame axes of the respective interfaces.
For vertex <em>i</em> belonging to interface <em>k</em> we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{x}[i:i+4] =
\begin{bmatrix}
    c^{n+}_{i} \\
    c^{n-}_{i} \\
    c^{u}_{i} \\
    c^{v}_{i}
\end{bmatrix}\end{split}\]</div>
<p>with</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(c^{n+}_{i}\)</span> the component in the direction of the frame normal of interface <em>k</em> (a “compression” contact)</p></li>
<li><p><span class="math notranslate nohighlight">\(c^{n-}_{i}\)</span> the component in the opposite direction of the frame normal of interface <em>k</em> (a “tension” contact)</p></li>
<li><p><span class="math notranslate nohighlight">\(c^{u}_{i}\)</span> the component in the direction of the frame <em>u</em> direction of interface <em>k</em> (a “friction” contact)</p></li>
<li><p><span class="math notranslate nohighlight">\(c^{v}_{i}\)</span> the component in the direction of the frame <em>v</em> direction of interface <em>k</em> (a “friction” contact)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The vertices are grouped per interface.
For example, if interface <em>k</em> has 4 vertices, then the force magnitudes along the
frame directions per vertex of the interface are</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
    &amp; \mathbf{v}_{i + 0} &amp; = \mathbf{v}_{k, 0} \quad &amp; = \mathbf{x}[i:i+4] \\
    &amp; \mathbf{v}_{i + 1} &amp; = \mathbf{v}_{k, 1} \quad &amp; = \mathbf{x}[i+4:i+8] \\
    &amp; \mathbf{v}_{i + 2} &amp; = \mathbf{v}_{k, 2} \quad &amp; = \mathbf{x}[i+8:i+12] \\
    &amp; \mathbf{v}_{i + 3} &amp; = \mathbf{v}_{k, 3} \quad &amp; = \mathbf{x}[i+12:i+16]
\end{aligned}\end{split}\]</div>
</div>
<div class="section" id="energy">
<h3>Energy<a class="headerlink" href="#energy" title="Permalink to this headline">¶</a></h3>
<p>The quadratic energy of the optimisation problem is formulated as</p>
<div class="math notranslate nohighlight">
\[0.5 \, \mathbf{x}^{T} \mathbf{P} \mathbf{x} + \mathbf{q}^{T} \mathbf{x}\]</div>
<p>This is essentially the sum of all squared, unknown contact force components at the
vertices of the interfaces, with each type of force component weighted by a penalty factor.</p>
<p><span class="math notranslate nohighlight">\(\mathbf{P}\)</span> is the <em>4n-by-4n</em> weighting matrix with the following factors
repeated along its diagonal</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{aligned}
    &amp; c^{n+} &amp; \Rightarrow \quad &amp; 1.0 \\
    &amp; c^{n-} &amp; \Rightarrow \quad &amp; 1e^{+5} \\
    &amp; c^{u}  &amp; \Rightarrow \quad &amp; 1.0 \\
    &amp; c^{v}  &amp; \Rightarrow \quad &amp; 1.0
\end{aligned}\end{split}\]</div>
<p>The forces along the negative normal directions of the interface frames are
thus heavily penalised. The goal is to find an equilibrium state that requires
as little adhesion between the blocks as possible, and relies only on compression
and friction.</p>
</div>
<div class="section" id="equality-constraints">
<h3>Equality constraints<a class="headerlink" href="#equality-constraints" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">compas_rbe.equilibrium.make_Aeq()</span></code></p>
</div>
<p>The equality constraints represent the necessary conditions for the assembly to be
in static equilibrium. They express the equilibrium of forces at the vertices of
the interfaces between the blocks.</p>
<p><span class="math notranslate nohighlight">\(\mathbf{A}\)</span> is the <em>6n-by-4n</em> coefficient matrix of the 6 equilibrium equations
per vertex of the <em>n</em> interface vertices, as a function of the 4 unknown force
components per vertex.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{A}[i:i+6, j:j+4]
=
\begin{bmatrix}
     -1,  &amp;  0, &amp;  0, &amp;  0 \\
      0,  &amp; -1, &amp;  0, &amp;  0 \\
    -\mu, &amp;  0, &amp;  1, &amp;  0 \\
    -\mu, &amp;  0, &amp; -1, &amp;  0 \\
    -\mu, &amp;  0, &amp;  0, &amp;  1 \\
    -\mu, &amp;  0, &amp;  0, &amp; -1
\end{bmatrix}\end{split}\]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Vertex <em>i</em> of the interface vertices belongs to a particular interface <em>k</em>
which is the contact surface between exactly two blocks <em>m</em> and <em>n</em>.</p>
</div>
</div>
<div class="section" id="inequality-constraints">
<h3>Inequality constraints<a class="headerlink" href="#inequality-constraints" title="Permalink to this headline">¶</a></h3>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">compas_rbe.equilibrium.make_Aiq()</span></code></p>
</div>
<p><span class="math notranslate nohighlight">\(\mathbf{G}\)</span> is the <em>6n-by-4n</em> coefficient matrix of the 6 inequality constraints
per vertex of the <em>n</em> interface vertices, as a function of the 4 unknown force
components per vertex.</p>
<div class="math notranslate nohighlight">
\[\begin{split}\mathbf{G}[i:i+6, j:j+4]
=
\begin{bmatrix}
     -1,  &amp;  0, &amp;  0, &amp;  0 \\
      0,  &amp; -1, &amp;  0, &amp;  0 \\
    -\mu, &amp;  0, &amp;  1, &amp;  0 \\
    -\mu, &amp;  0, &amp; -1, &amp;  0 \\
    -\mu, &amp;  0, &amp;  0, &amp;  1 \\
    -\mu, &amp;  0, &amp;  0, &amp; -1
\end{bmatrix}\end{split}\]</div>
<p><span class="math notranslate nohighlight">\(\mathbf{h}\)</span> is a <em>6n-by-1</em> vector of zeros.</p>
</div>
</div>
</div>

        
      </main>
      <!-- content -->
      <!-- sidebar -->
      <div class="col-12 col-md-3 compas-sidebar" role="navigation">
        <form id="search" class="d-flex align-items-center compas-searchbox" action="search.html" method="get">
          <input class="form-control" type="text" name="q" placeholder="Search docs" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
          <button class="navbar-toggler d-md-none" type="button" data-toggle="collapse" data-target="#compas-navigation" aria-controls="compas-navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </form>
        
        
          <div id="compas-navigation" class="collapse compas-navigation">
          <ul class="nav flex-column active">
<li class="nav-item active"><a class="nav-link active current reference internal" href="#">Introduction</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="gettingstarted.html">Getting Started</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="api.html">API Reference</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="publications.html">Publications</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="license.html">License</a></li>
</ul>

          </div>
        
      </div>
      <!-- sidebar -->
      <!-- toc -->
      <div class="d-none d-xl-block col-xl-2 compas-toc" role="toc">
        
        <ul class="nav flex-column" id="compas-toc">
<li class="nav-item"><a class="nav-link reference internal" href="#">Rigid Block Equilibrium Analysis</a><ul class="nav flex-column">
<li class="nav-item"><a class="nav-link reference internal" href="#introduction">Introduction</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#assembly-data-structure">Assembly data structure</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#quadratic-program">Quadratic Program</a><ul class="nav flex-column">
<li class="nav-item"><a class="nav-link reference internal" href="#energy">Energy</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#equality-constraints">Equality constraints</a></li>
<li class="nav-item"><a class="nav-link reference internal" href="#inequality-constraints">Inequality constraints</a></li>
</ul>
</li>
</ul>
</li>
</ul>

      </div>
      <!-- toc -->
    </div>
  </div>
  <!-- main -->
  <!-- footer -->
  <footer class="compas-footer">
    <nav class="nav p-2">
      
        <a href="index.html" title="compas_rbe" class="nav-link footer-link float-start text-left d-flex w-50" rel="prev">
          <div class="nav-button p-2 m-2"><i class="fas fa-arrow-left"></i></div>
          <div class="nav-title flex-grow-1 align-self-center">
            <div class="nav-direction small font-weight-light">Previous</div>
            compas_rbe
          </div>
        </a>
      

      
        <a href="gettingstarted.html" title="Getting Started" class="nav-link footer-link float-end text-right d-flex w-50" rel="next">
          <div class="nav-title footer-link flex-grow-1 align-self-center">
            <div class="nav-direction small font-weight-light">Next</div>
            Getting Started
          </div>
          <div class="nav-button p-2 m-2"><i class="fas fa-arrow-right"></i></div>
        </a>
      
    </nav>  
  </footer>
  <!-- footer -->
  <!-- below -->
  <div class="below py-5" style="background-color: #222;">
    <div class="container">
      <div class="row flex-column">
      <div class="col-12 col-md-6 mx-md-auto text-center">
        <h4 class="pb-3 below-text">COMPAS</h4>
        <p class="below-text">
          A computational framework for collaboration and research
          in Architecture, Engineering, Fabrication, and Construction.
        </p>
        <nav class="nav justify-content-center pb-3">
          <a class="nav-link mx-2 px-0 below-link" href="http://github.com/compas-dev" target="_blank">
            <span class="fab fa-github fa-1x"></span>
          </a>
          <a class="nav-link mx-2 px-0 below-link" href="http://forum.compas-framework.org" target="_blank">
            <span class="fab fa-discourse fa-1x"></span>
          </a>
          <a class="nav-link mx-2 px-0 below-link" href="https://pypi.org/project/COMPAS/" target="_blank">
            <span class="fab fa-python fa-1x"></span>
          </a>
        </nav>
      </div>
      </div>
      <div class="row">
      <div class="col text-center">
        <p class="p-0 m-0 below-text">Copyright &copy; 2017-2021 compas-dev</p>
      </div>
      </div>
    </div>
  </div>
  <!-- below -->
  <!-- scripts -->
  <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
  URL_ROOT          : '',
  VERSION           : '0.1.1',
  COLLAPSE_INDEX    : false,
  FILE_SUFFIX       : '.html',
  HAS_SOURCE        : 'false',
  SOURCELINK_SUFFIX : '.txt'
  };
  </script>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https:////cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.0.0/anchor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>

  <script src="_static/underscore.js"></script>
  <script src="_static/doctools.js"></script>
  <script src="_static/js/searchtools_.js"></script>

  <script>
  $(document).ready(function() {
    $(".language-default code").addClass("python");
    $(".language-python code").addClass("python");
    $(".language-bash code").addClass("bash");
    $(".language-cpp code").addClass("cpp");
    $(".language-json code").addClass("json");
    $(".language-none code").addClass("plaintext");

    hljs.initHighlighting();
    anchors.add();

    $('.nav-versions .dropdown-item').filter(function(i, ver) {
      return window.location.href.startsWith(ver.href);
    }).addClass("active");

  });


  var url = $("#doc_versions").data("url");
  var docs_site = $("#doc_versions").data("docs");

  if (url) {
    $.get(url, res=>{
      var lines = res.match(/[^\r\n]+/g);
      lines.forEach(version => {
        $("#doc_version_list").append("<a class=\"dropdown-item\" href=\""+ docs_site + version + "\">" + version + "</a>");
      });
    })
  }
  </script>
  <!-- scripts -->
  
  
</body>
</html>